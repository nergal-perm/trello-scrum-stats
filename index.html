<!DOCTYPE <!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Sample trello queries</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <script src="main.js"></script>
    -->
</head>
<body>

    <div id="testDiv"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $("#testDiv").html("<h1>Hello, world</h1>");
            $.getJSON( "assets/config.json", function( data ) {
                var apiData = {};
                $.each( data, function( key, val ) {
                    apiData[key] = val;
                });
                getAllTheSprints(apiData);
            });
        });

        function getAllTheSprints(apiData) {
            var url = "https://api.trello.com/1/lists/" + apiData.sprintsListID +
            "/cards?key=" + apiData.apiKey + "&token=" + apiData.apiToken + "&fields=name,id&customFieldItems=true";
            $.getJSON(url, function (data) {
                var sprints = [];
                var items = [];
                $.each(data, function(item) {
                    var sprint = data[item];
                    sprints.push(sprint);
                    items.push( "<li>" + sprint.name + ": " + sprint.customFieldItems[1].value.date + "</li>" );
                });
                
                $( "<ul/>", {
                    "class": "my-new-list",
                    html: items.join( "" )
                }).appendTo( "#testDiv" );
            });
        }
    </script>
</body>
</html>